<svg width="480" height="133" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <foreignObject width="480" height="133">
    <div xmlns="http://www.w3.org/1999/xhtml" class="container">
      <style>
        .main {
          display: flex;
        }

        .currentStatus {
          font-size: 24px;
          position: static;
          margin-top: -5px;
          text-align: center;
          color: #828282;
          font-size: 10px;
          -webkit-user-select: none;
          user-select: none;
        }

        .container {
          border-radius: 5px;
          padding: 10px 10px 10px 0px;
        }

        .art {
          width: 27%;
          float: left;
          margin-left: -5px;
        }

        .content {
          width: 71%;
        }

        .song {
          color: #666;
          overflow: hidden;
          margin-top: 3px;
          font-size: 24px;
          text-align: center;
          white-space: nowrap;
          text-overflow: ellipsis;
        }

        .artist {
          color: #b3b3b3;
          font-size: 20px;
          margin-top: 4px;
          text-align: center;
          margin-bottom: 5px;
        }

        .cover {
          width: 100px;
          height: 100px;
          border-radius: 5px;
        }

        #bars {
          width: 40px;
          height: 30px;
          bottom: 19px;
          position: absolute;
          margin: -20px 0 0 0px;
        }

        .bar {
          width: 3px;
          bottom: 1px;
          height: 3px;
          position: absolute;
          background: #1DB954cc;
          animation: sound 0ms ease-out infinite alternate;
        }

        div {
          font-family: -apple-system, BlinkMacSystemFont, Segoe UI, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji;
        }

        @keyframes sound {
          0% {
            height: 3px;
            opacity: .35;
          }

          100% {
            height: 15px;
            opacity: 0.95;
          }
        }

        <%
          const barCount = 84;
          const bars = [...Array(barCount)]
          let left = 1;
          for(const i of bars.map((_, num) => num + 1)) {
            %>
            .bar:nth-child(<%= i %>) {
              left: <%= left %>px;
              animation-delay: <%= 1000 - Math.trunc(2000 * Math.random()) %>ms;
              animation-duration: <%= Math.trunc(350 * Math.random() + 1000) %>ms;
            }
            <%
            left += 4;
          }
        %>
      </style>

      <div class="main">
        <a class="art" href="<%= songUrl %>" target="_blank" rel="noopener noreferrer">
          <center>
            <img src="<%= imageUrl %>" class="cover" />
          </center>
        </a>

        <div class="content">
          <div class="currentStatus"><%= status %></div>
          <div class="song"><%= songName %></div>
          <div class="artist"><%= artistName %></div>
          <div id="bars"><%- bars.map((_, num) => '<div class="bar"></div>').join('') %></div>
        </div>
      </div>

    </div>
  </foreignObject>
</svg>
